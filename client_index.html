<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta charset="UTF-8">
  <title>WebSocket Messages</title>
</head>
<body class="bg-light">
  <div class="container my-5">
    <h1 class="text-center">Epidemic Replication</h1>
    <div class="row">
      <div class="col-md-6">
        <h3 style="color: yellowgreen">Node A1:</h3>
        <div class="card">
          <div class="card-body" id="a1"></div>
        </div>
      </div>
      <div class="col-md-6">
        <h3 style="color: yellowgreen">Node A2:</h3>
        <div class="card">
          <div class="card-body" id="a2"></div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-6">
        <h3 style="color: yellowgreen">Node A3:</h3>
        <div class="card">
          <div class="card-body" id="a3"></div>
        </div>
      </div>
      <div class="col-md-6">
        <h3 style="color: red">Node B1:</h3>
        <div class="card">
          <div class="card-body" id="b1"></div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-6">
        <h3 style="color: red">Node B2:</h3>
        <div class="card">
          <div class="card-body" id="b2"></div>
        </div>
      </div>
      <div class="col-md-6">
        <h3 style="color: blue">Node C1:</h3>
        <div class="card">
          <div class="card-body" id="c1"></div>
        </div>
      </div>
    </div>
    <div class="row mt-4">
      <div class="col-md-6">
        <h3 style="color: blue">Node C2:</h3>
        <div class="card">
          <div class="card-body" id="c2"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const a1 = document.getElementById('a1');
    const a2 = document.getElementById('a2');
    const a3 = document.getElementById('a3');
    const b1 = document.getElementById('b1');
    const b2 = document.getElementById('b2');
    const c1 = document.getElementById('c1');
    const c2 = document.getElementById('c2');


    const ws = new WebSocket('ws://localhost:8080/demoApp'); // Java WebSocket server URL

    ws.onopen = function () {
      // addMessage('[CLIENT]: Connected to Java WebSocket server.');
    };

    ws.onmessage = function (event) {
      // addMessage(`[CLIENT]: Received message from Java WebSocket server: ${event.data}`);
      addMessage(event.data);
    };

    function addMessage(message) {

      id = message.split(":")[0];
      log = message.split(":")[1];

      switch (id) {
        case "A1":
          a1.innerText = log + '\n';
          break;
        case "A2":
          a2.innerText = log + '\n';
          break;
        case "A3":
          a3.innerText = log + '\n';
          break;
        case "B1":
          b1.innerText = log + '\n';
          break;
        case "B2":
          b2.innerText = log + '\n';
          break;
        case "C1":
          c1.innerText = log + '\n';
          break;
        case "C2":
          c2.innerText = log + '\n';
          break;
        default:
          console.log("Error: " + message);
          break;
      }
    }
  </script>
</body>

</html>
